<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Advanced Drawing Tools |
	Tradovate Custom Indicators</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../../assets/css/main.css">
</head>
<body>
<div class="main">
	<header>
		<div class="tsd-page-toolbar">
			<div class="container">
				<div class="table-wrap">
					<div class="table-cell" id="tsd-search" data-index="../../assets/js/search.json"
					data-base="../..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<ul class="results-priority" style="display:none">
					</ul>
					<a href="../../index.html" class="title">Tradovate Custom Indicators</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
</div>
<div class="tsd-page-title">
	<div class="container">
		<ul class="tsd-breadcrumb">
			<li>
				<a href="index.html">Tutorial</a>
			</li>
			<li>
				<a href="AdvancedDrawing.html">Advanced Drawing Tools</a>
			</li>
		</ul>
	</div>
</div>
</header>        <div class="container container-main">
	<div class="row">
		<div class="col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation root">
				<ul>
					<li class=" pp-nav pp-group root">
						<a href="" class="tsd-kind-icon">Tutorial</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="index.html" class="tsd-kind-icon">Introduction</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="SimplePriceOffset.html" class="tsd-kind-icon">Simple <wbr>Price <wbr>Offset</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="ParameterizedPriceOffset.html" class="tsd-kind-icon">Parameterized <wbr>Price <wbr>Offset</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="ExponentialMovingAverage.html" class="tsd-kind-icon">Exponential <wbr>Moving <wbr>Average</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="HumanFriendlierEMA.html" class="tsd-kind-icon">Human-<wbr>friendlier EMA</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="BuiltinTools.html" class="tsd-kind-icon">Built-<wbr>in tools</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="DoubleEMA.html" class="tsd-kind-icon">Double EMA</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="Plotters.html" class="tsd-kind-icon">Plotters</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="SignalingATR.html" class="tsd-kind-icon">Signaling <wbr>Average <wbr>True <wbr>Range</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="BlackboxDLL.html" class="tsd-kind-icon">Blackbox DLL</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="FourierMovingAverage.html" class="tsd-kind-icon">Fourier <wbr>Moving <wbr>Average</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="Spectrogram.html" class="tsd-kind-icon">Spectrogram</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="Graphics.html" class="tsd-kind-icon">Graphics</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="Alligator.html" class="tsd-kind-icon">Alligator</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="DrawingTools.html" class="tsd-kind-icon">Custom <wbr>Drawing <wbr>Tools</a>
					</li>
					<li class=" pp-nav pp-page root">
						<a href="ScaleBoundValues.html" class="tsd-kind-icon">Scale<wbr>Bound <wbr>Values</a>
					</li>
				</ul>
				<ul class="current">
					<li class="current pp-nav pp-page root">
						<a href="AdvancedDrawing.html" class="tsd-kind-icon">Advanced <wbr>Drawing <wbr>Tools</a>
					</li>
				</ul>
				<ul class="after-current">
					<li class=" pp-nav pp-group root">
						<a href="" class="tsd-kind-icon">Modules</a>
					</li>
					<li class="  root">
						<a href="../../modules.html" class="tsd-kind-icon">Modules</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/shifts.html" class="tsd-kind-icon">Shifts</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/timeseries.html" class="tsd-kind-icon">Time<wbr>Series</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/calculator.html" class="tsd-kind-icon">calculator</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/canvas.html" class="tsd-kind-icon">canvas</a>
						<ul>
							<li class=" tsd-kind-namespace tsd-parent-kind-module">
								<a href="../../modules/canvas.plotting.html" class="tsd-kind-icon">plotting</a>
								<ul>
									<li class=" tsd-kind-namespace tsd-parent-kind-namespace">
										<a href="../../modules/canvas.plotting.x.html" class="tsd-kind-icon">x</a>
									</li>
								</ul>
							</li>
						</ul>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/dlls.html" class="tsd-kind-icon">dlls</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/drawing_tool.html" class="tsd-kind-icon">drawing-<wbr>tool</a>
						<ul>
							<li class=" tsd-kind-namespace tsd-parent-kind-module">
								<a href="../../modules/drawing_tool.drawingtooltip.html" class="tsd-kind-icon">Drawing<wbr>Tooltip</a>
							</li>
						</ul>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/graphics_displayobject.html" class="tsd-kind-icon">graphics/<wbr>Display<wbr>Object</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/graphics_graphicsresponse.html" class="tsd-kind-icon">graphics/<wbr>Graphics<wbr>Response</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/graphics_scale.html" class="tsd-kind-icon">graphics/<wbr>Scale</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/graphics_style.html" class="tsd-kind-icon">graphics/<wbr>Style</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/indicator.html" class="tsd-kind-icon">indicator</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/params.html" class="tsd-kind-icon">params</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/plots.html" class="tsd-kind-icon">plots</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/plotter.html" class="tsd-kind-icon">plotter</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/scaler.html" class="tsd-kind-icon">scaler</a>
					</li>
					<li class=" tsd-kind-module root">
						<a href="../../modules/scheme_styles.html" class="tsd-kind-icon">scheme-<wbr>styles</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
		<div class="col-content">
			<h1>Advanced Drawing Tools</h1>
			<div class="tsd-panel tsd-typography">
				<a href="#advanced-custom-drawing-tools" id="advanced-custom-drawing-tools" style="color: inherit; text-decoration: none;">
					<h1>Advanced Custom Drawing Tools</h1>
				</a>
				<a href="#creating-a-trend-line-tool" id="creating-a-trend-line-tool" style="color: inherit; text-decoration: none;">
					<h2>Creating a Trend-Line Tool</h2>
				</a>
				<p>Because we can do whatever we want with JavaScript, we have a huge amount of freedom when developing our own custom drawing tools. This allows us to use advanced math, place graphics arbitrarily, and even add tooltips that contain custom calculations. In this article, I&#39;ll demonstrate what we can accomplish with the Custom Drawing module by walking through the creation of a simple Trend-Line drawing tool.</p>
				<p>Let&#39;s begin by building a template for our drawing tool:</p>
				<pre><code class="language-js"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">predef</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;./tools/predef&quot;</span><span style="color: #000000">)</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">px</span><span style="color: #000000">, </span><span style="color: #0070C1">du</span><span style="color: #000000">, </span><span style="color: #0070C1">op</span><span style="color: #000000"> } = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;./tools/graphics&quot;</span><span style="color: #000000">)</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Trender</span><span style="color: #000000"> = {</span>

<span style="color: #000000">    </span><span style="color: #795E26">render</span><span style="color: #000000">() {},</span>

<span style="color: #000000">    </span><span style="color: #795E26">tooltips</span><span style="color: #000000">() {},</span>

<span style="color: #000000">    </span><span style="color: #795E26">anchorRestraints</span><span style="color: #000000">() {},</span>

<span style="color: #000000">    </span><span style="color: #795E26">anchorStyles</span><span style="color: #000000">() {</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [</span>
<span style="color: #000000">            { </span><span style="color: #001080">color:</span><span style="color: #000000"> </span><span style="color: #001080">props</span><span style="color: #000000">.</span><span style="color: #001080">lower</span><span style="color: #000000"> },</span>
<span style="color: #000000">            { </span><span style="color: #001080">color:</span><span style="color: #000000"> </span><span style="color: #001080">props</span><span style="color: #000000">.</span><span style="color: #001080">lower</span><span style="color: #000000"> },</span>
<span style="color: #000000">            { </span><span style="color: #001080">color:</span><span style="color: #000000"> </span><span style="color: #001080">props</span><span style="color: #000000">.</span><span style="color: #001080">upper</span><span style="color: #000000"> }</span>
<span style="color: #000000">        ]</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">}</span>

<span style="color: #267F99">module</span><span style="color: #000000">.</span><span style="color: #267F99">exports</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;Trender&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #001080">description:</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;Trender&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #001080">drawing:</span><span style="color: #000000"> </span><span style="color: #001080">Trender</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #001080">params:</span><span style="color: #000000"> {</span>
<span style="color: #000000">        </span><span style="color: #001080">upper:</span><span style="color: #000000"> </span><span style="color: #001080">predef</span><span style="color: #000000">.</span><span style="color: #001080">paramSpecs</span><span style="color: #000000">.</span><span style="color: #795E26">color</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;#2d2&#039;</span><span style="color: #000000">),</span>
<span style="color: #000000">        </span><span style="color: #001080">middle:</span><span style="color: #000000"> </span><span style="color: #001080">predef</span><span style="color: #000000">.</span><span style="color: #001080">paramSpecs</span><span style="color: #000000">.</span><span style="color: #795E26">color</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;#999&#039;</span><span style="color: #000000">),</span>
<span style="color: #000000">        </span><span style="color: #001080">lower:</span><span style="color: #000000"> </span><span style="color: #001080">predef</span><span style="color: #000000">.</span><span style="color: #001080">paramSpecs</span><span style="color: #000000">.</span><span style="color: #795E26">color</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;#d22&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #001080">maxN:</span><span style="color: #000000"> </span><span style="color: #098658">3</span>
<span style="color: #000000">}</span>
</code></pre>
				<p>First, notice we&#39;ve brought a few methods and objects into scope with <code>require</code>. We will need We can define the our drawing tool as a simple object. The <code>Trender</code> object contains the drawing implementation methods that we will need to utilize. We can then use that object as our <code>drawing</code> field in the <code>module.exports</code> portion of the file. Some other notable portions of the <code>module.exports</code> object include the <code>params</code> field, our user defined parameters, and <code>maxN</code> which lets us define how many anchors our tool can have. In this case we want three anchors, which I&#39;ll explain as we go on. We can begin filling out our drawing implementation methods at this point. For now, let&#39;s focus on the <code>render</code> method. We will start by rendering a simple line:</p>
				<pre><code class="language-js"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Trender</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #008000">//...</span>

<span style="color: #000000">    </span><span style="color: #795E26">render</span><span style="color: #000000">({</span><span style="color: #001080">anchors</span><span style="color: #000000">, </span><span style="color: #001080">props</span><span style="color: #000000">}) {</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> {</span>
<span style="color: #000000">            </span><span style="color: #001080">items:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                {</span>
<span style="color: #000000">                    </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;LineSegments&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;lower&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">lines:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                        {</span>
<span style="color: #000000">                            </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Line&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                            </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">],</span>
<span style="color: #000000">                            </span><span style="color: #001080">b:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">]</span>
<span style="color: #000000">                        }</span>
<span style="color: #000000">                    ],</span>
<span style="color: #000000">                    </span><span style="color: #001080">lineStyle:</span><span style="color: #000000"> {</span>
<span style="color: #000000">                        </span><span style="color: #001080">width:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">color:</span><span style="color: #000000"> </span><span style="color: #001080">props</span><span style="color: #000000">.</span><span style="color: #001080">lower</span>
<span style="color: #000000">                    }</span>
<span style="color: #000000">                },</span>
<span style="color: #000000">            ]</span>
<span style="color: #000000">        }</span>
<span style="color: #000000">    }</span>

<span style="color: #000000">    </span><span style="color: #008000">//...</span>
<span style="color: #000000">}</span>
</code></pre>
				<p>If we try this, it should produce a line from the first anchor to the second anchor in the <code>props.lower</code> color (which defaults to reddish). But what we really want are three lines - an upper line, a lower line, and a midpoint line. We can use the third anchor to determine the height of our trend channel. Let&#39;s add a top line based on the third anchor:</p>
				<pre><code class="language-js"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Trender</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #008000">//...</span>

<span style="color: #000000">    </span><span style="color: #795E26">render</span><span style="color: #000000">({</span><span style="color: #001080">anchors</span><span style="color: #000000">, </span><span style="color: #001080">props</span><span style="color: #000000">}) {</span>
<span style="color: #000000">        </span><span style="color: #008000">//represents the height of the channel, or zero before anchors[2] exists</span>
<span style="color: #000000">        </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">upperDiff</span><span style="color: #000000"> = </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">]</span>
<span style="color: #000000">            ? </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> - </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span>
<span style="color: #000000">            : </span><span style="color: #098658">0</span>

<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> {</span>
<span style="color: #000000">            </span><span style="color: #001080">items:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                </span><span style="color: #008000">//...</span>
<span style="color: #000000">                {</span>
<span style="color: #000000">                    </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;LineSegments&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;upper&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">lines:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                        {</span>
<span style="color: #000000">                            </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Line&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                            </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">] </span>
<span style="color: #000000">                                ? {</span>
<span style="color: #000000">                                    </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">x</span><span style="color: #000000">,</span>
<span style="color: #000000">                                    </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #795E26">du</span><span style="color: #000000">(</span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> + </span><span style="color: #001080">upperDiff</span><span style="color: #000000">) </span>
<span style="color: #000000">                                }</span>
<span style="color: #000000">                                : </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">],</span>
<span style="color: #000000">                            </span><span style="color: #001080">b:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">] </span>
<span style="color: #000000">                                ? {</span>
<span style="color: #000000">                                    </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">x</span><span style="color: #000000">,</span>
<span style="color: #000000">                                    </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #795E26">du</span><span style="color: #000000">(</span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> + </span><span style="color: #001080">upperDiff</span><span style="color: #000000">)</span>
<span style="color: #000000">                                }</span>
<span style="color: #000000">                                : </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">]</span>
<span style="color: #000000">                        }</span>
<span style="color: #000000">                    ],</span>
<span style="color: #000000">                    </span><span style="color: #001080">lineStyle:</span><span style="color: #000000"> {</span>
<span style="color: #000000">                        </span><span style="color: #001080">width:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">color:</span><span style="color: #000000"> </span><span style="color: #001080">props</span><span style="color: #000000">.</span><span style="color: #001080">upper</span>
<span style="color: #000000">                    }</span>
<span style="color: #000000">                }</span>
<span style="color: #000000">            ]</span>
<span style="color: #000000">        }</span>
<span style="color: #000000">    }</span>

<span style="color: #000000">    </span><span style="color: #008000">//...</span>
<span style="color: #000000">}</span>
</code></pre>
				<p> Now we&#39;re getting somewhere. Notice that we&#39;ve used ternary expressions to determine the <code>a</code> and <code>b</code> points for the line drawings. This is because trying to read the <code>x</code> or <code>y</code> fields of an anchor when it is null will produce an error and mess up how the drawing renders, and it allows us to default to the zeroth anchor before <code>anchors[1]</code> or <code>anchors[2]</code> exist. You&#39;ll notice this pattern of defaulting to a known existing value often. But we still want to have a midpoint line as well. We can use the same <code>upperDiff</code> again, divided in half, to find the midpoint line of our channel:</p>
				<pre><code class="language-js">
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Trender</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #008000">//...</span>

<span style="color: #000000">    </span><span style="color: #795E26">render</span><span style="color: #000000">({</span><span style="color: #001080">anchors</span><span style="color: #000000">, </span><span style="color: #001080">props</span><span style="color: #000000">}) {</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> {</span>
<span style="color: #000000">            </span><span style="color: #001080">items:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                </span><span style="color: #008000">//...</span>
<span style="color: #000000">                {</span>
<span style="color: #000000">                    </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;LineSegments&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;middle&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">lines:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                        {</span>
<span style="color: #000000">                            </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Line&#039;</span><span style="color: #000000">,                            </span>
<span style="color: #000000">                            </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">] </span>
<span style="color: #000000">                                ? {</span>
<span style="color: #000000">                                    </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">x</span><span style="color: #000000">,</span>
<span style="color: #000000">                                    </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #795E26">du</span><span style="color: #000000">(</span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> + </span><span style="color: #001080">upperDiff</span><span style="color: #000000">/</span><span style="color: #098658">2</span><span style="color: #000000">) </span>
<span style="color: #000000">                                }</span>
<span style="color: #000000">                                : </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">],</span>
<span style="color: #000000">                            </span><span style="color: #001080">b:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">] </span>
<span style="color: #000000">                                ? {</span>
<span style="color: #000000">                                    </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">x</span><span style="color: #000000">,</span>
<span style="color: #000000">                                    </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #795E26">du</span><span style="color: #000000">(</span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> + </span><span style="color: #001080">upperDiff</span><span style="color: #000000">/</span><span style="color: #098658">2</span><span style="color: #000000">)</span>
<span style="color: #000000">                                }</span>
<span style="color: #000000">                                : </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">]</span>
<span style="color: #000000">                        }</span>
<span style="color: #000000">                    ],</span>
<span style="color: #000000">                    </span><span style="color: #001080">lineStyle:</span><span style="color: #000000"> {</span>
<span style="color: #000000">                        </span><span style="color: #001080">width:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">color:</span><span style="color: #000000"> </span><span style="color: #001080">props</span><span style="color: #000000">.</span><span style="color: #001080">middle</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">lineStyle:</span><span style="color: #000000"> </span><span style="color: #098658">3</span>
<span style="color: #000000">                    },</span>
<span style="color: #000000">                }</span>
<span style="color: #000000">            ]</span>
<span style="color: #000000">        }</span>
<span style="color: #000000">    }</span>

<span style="color: #000000">    </span><span style="color: #008000">//...</span>
<span style="color: #000000">}</span>
</code></pre>
				<p>Our drawing is basically complete. You should have something that looks like this:</p>
				<p><img src="../../media/AdvancedDrawings1.png" alt="Our Trend channel in action."></p>
				<p>But when you hold <code>SHIFT</code> over this drawing, we get no information. That&#39;s because we haven&#39;t drawn any tooltips yet. Luckily, drawing tooltips is just as easy as defining a render function. Let&#39;s draw a tooltip for the price-point at <code>anchors[0]</code>.</p>
				<pre><code class="language-js"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Trender</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #008000">//...</span>

<span style="color: #000000">    </span><span style="color: #795E26">tooltips</span><span style="color: #000000">({</span><span style="color: #001080">anchors</span><span style="color: #000000">}) {</span>

<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [</span>
<span style="color: #000000">            {</span>
<span style="color: #000000">                </span><span style="color: #001080">coord:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">],</span>
<span style="color: #000000">                </span><span style="color: #001080">alignment:</span><span style="color: #000000"> {</span>
<span style="color: #000000">                    </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;predef&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;center&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;below&#039;</span>
<span style="color: #000000">                },</span>
<span style="color: #000000">                </span><span style="color: #001080">items:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                    {</span>
<span style="color: #000000">                        </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;a0&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">content:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span>
<span style="color: #000000">                    }</span>
<span style="color: #000000">                ]</span>
<span style="color: #000000">            },</span>
<span style="color: #000000">        ]</span>
<span style="color: #000000">    },</span>

<span style="color: #000000">    </span><span style="color: #008000">//...</span>
<span style="color: #000000">}</span>
</code></pre>
				<p>We should add a tooltip for the prices at each of the corners of our tool. Let&#39;s write another tooltip for <code>anchors[1]</code> that includes both the price-point, and the tick-delta between <code>anchors[0]</code> and <code>anchors[1]</code>. To get the tick delta, we&#39;ll need to track some differences between points that we have defined and their absolute values as well.</p>
				<pre><code class="language-js">
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Trender</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #008000">//...</span>

<span style="color: #000000">    </span><span style="color: #795E26">tooltips</span><span style="color: #000000">({</span><span style="color: #001080">anchors</span><span style="color: #000000">, </span><span style="color: #001080">props</span><span style="color: #000000">}) {</span>
<span style="color: #000000">        </span><span style="color: #008000">//difference between anchors 0 and 1, and the absolute value of that difference</span>
<span style="color: #000000">        </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">deltaARaw</span><span style="color: #000000"> = </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] ? </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> - </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> : </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">              </span><span style="color: #0070C1">deltaA</span><span style="color: #000000">    = </span><span style="color: #267F99">Math</span><span style="color: #000000">.</span><span style="color: #795E26">abs</span><span style="color: #000000">(</span><span style="color: #001080">deltaARaw</span><span style="color: #000000">)</span>

<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [</span>
<span style="color: #000000">            </span><span style="color: #008000">//...</span>
<span style="color: #000000">            {</span>
<span style="color: #000000">                </span><span style="color: #001080">coord:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] || </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">],</span>
<span style="color: #000000">                </span><span style="color: #001080">alignment:</span><span style="color: #000000"> {</span>
<span style="color: #000000">                    </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;predef&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;right&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;below&#039;</span>
<span style="color: #000000">                },</span>
<span style="color: #000000">                </span><span style="color: #001080">items:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                    </span><span style="color: #008000">//price-point</span>
<span style="color: #000000">                    {</span>
<span style="color: #000000">                        </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;a1&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">content:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] ? </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> : </span><span style="color: #098658">0</span>
<span style="color: #000000">                    },</span>
<span style="color: #000000">                    </span><span style="color: #008000">//tick delta</span>
<span style="color: #000000">                    {</span>
<span style="color: #000000">                        </span><span style="color: #001080">title:</span><span style="color: #000000"> </span>
<span style="color: #000000">                            </span><span style="color: #001080">deltaARaw</span><span style="color: #000000"> &lt; </span><span style="color: #098658">0</span><span style="color: #000000"> ? </span><span style="color: #A31515">&#039;min. A to B Long: &#039;</span>
<span style="color: #000000">                        :   </span><span style="color: #001080">deltaARaw</span><span style="color: #000000"> &gt; </span><span style="color: #098658">0</span><span style="color: #000000"> ? </span><span style="color: #A31515">&#039;max. A to B Short: &#039;</span>
<span style="color: #000000">                        :                   </span><span style="color: #A31515">&#039; - &#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;lowerMin&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">content:</span><span style="color: #000000"> { </span><span style="color: #001080">delta:</span><span style="color: #000000"> </span><span style="color: #001080">deltaA</span><span style="color: #000000"> }</span>
<span style="color: #000000">                    },</span>
<span style="color: #000000">                ]</span>
<span style="color: #000000">            },</span>
<span style="color: #000000">        ]</span>
<span style="color: #000000">    }</span>

<span style="color: #000000">    </span><span style="color: #008000">//...</span>
<span style="color: #000000">}</span>
</code></pre>
				<p>Notice that we have some runtime variance here. Based on whether the <code>deltaARaw</code> value is positive or negative, we will render different text based on what that price point and tick delta represent. In this case it is the point at <code>anchors[1]</code>, so the lower right corner. This is either the minimum long value of the trend or the maximum short value of the trend. </p>
				<p>In order to implement the midpoint and upper points, we will need a value for the vertical delta. Let&#39;s add that to our defined variables and add another tooltip for the midpoint price point and tick delta:</p>
				<pre><code class="language-js">
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Trender</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #008000">//...</span>

<span style="color: #000000">    </span><span style="color: #795E26">tooltips</span><span style="color: #000000">({</span><span style="color: #001080">anchors</span><span style="color: #000000">, </span><span style="color: #001080">props</span><span style="color: #000000">}) {</span>
<span style="color: #000000">        </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">deltaARaw</span><span style="color: #000000"> = </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] ? </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> - </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> : </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">              </span><span style="color: #0070C1">deltaBRaw</span><span style="color: #000000"> = </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">] ? </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> - </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> : </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">              </span><span style="color: #0070C1">deltaA</span><span style="color: #000000">    = </span><span style="color: #267F99">Math</span><span style="color: #000000">.</span><span style="color: #795E26">abs</span><span style="color: #000000">(</span><span style="color: #001080">deltaARaw</span><span style="color: #000000">),</span>
<span style="color: #000000">              </span><span style="color: #0070C1">deltaB</span><span style="color: #000000">    = </span><span style="color: #267F99">Math</span><span style="color: #000000">.</span><span style="color: #795E26">abs</span><span style="color: #000000">(</span><span style="color: #001080">deltaBRaw</span><span style="color: #000000">)</span>

<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [</span>
<span style="color: #000000">            </span><span style="color: #008000">//...</span>
<span style="color: #000000">            {</span>
<span style="color: #000000">                </span><span style="color: #001080">coord:</span><span style="color: #000000"> </span>
<span style="color: #000000">                    </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] </span>
<span style="color: #000000">                    ? {</span>
<span style="color: #000000">                        </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">x</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #795E26">du</span><span style="color: #000000">(</span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> + </span><span style="color: #001080">deltaB</span><span style="color: #000000">/</span><span style="color: #098658">2</span><span style="color: #000000">)</span>
<span style="color: #000000">                    }</span>
<span style="color: #000000">                    : </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">],</span>
<span style="color: #000000">                </span><span style="color: #001080">alignment:</span><span style="color: #000000"> {</span>
<span style="color: #000000">                    </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;predef&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;right&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;center&#039;</span>
<span style="color: #000000">                },</span>
<span style="color: #000000">                </span><span style="color: #001080">items:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                    {</span>
<span style="color: #000000">                        </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;a2.5&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">content:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] ? </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> + </span><span style="color: #001080">deltaB</span><span style="color: #000000">/</span><span style="color: #098658">2</span><span style="color: #000000"> : </span><span style="color: #098658">0</span>
<span style="color: #000000">                    },</span>
<span style="color: #000000">                    {</span>
<span style="color: #000000">                        </span><span style="color: #001080">title:</span><span style="color: #000000"> </span>
<span style="color: #000000">                            </span><span style="color: #001080">deltaARaw</span><span style="color: #000000"> &lt; </span><span style="color: #098658">0</span><span style="color: #000000"> ? </span><span style="color: #A31515">&#039;avg. A to B Long: ~&#039;</span>
<span style="color: #000000">                        :   </span><span style="color: #001080">deltaARaw</span><span style="color: #000000"> &gt; </span><span style="color: #098658">0</span><span style="color: #000000"> ? </span><span style="color: #A31515">&#039;avg. A to B Short: ~&#039;</span>
<span style="color: #000000">                        :                   </span><span style="color: #A31515">&#039; - &#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;mid&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">content:</span><span style="color: #000000"> </span>
<span style="color: #000000">                            </span><span style="color: #001080">deltaARaw</span><span style="color: #000000"> &gt; </span><span style="color: #098658">0</span><span style="color: #000000"> ? { </span><span style="color: #001080">delta:</span><span style="color: #000000"> </span><span style="color: #001080">deltaA</span><span style="color: #000000"> - </span><span style="color: #001080">deltaB</span><span style="color: #000000">/</span><span style="color: #098658">2</span><span style="color: #000000"> }</span>
<span style="color: #000000">                        :   </span><span style="color: #001080">deltaARaw</span><span style="color: #000000"> &lt; </span><span style="color: #098658">0</span><span style="color: #000000"> ? { </span><span style="color: #001080">delta:</span><span style="color: #000000"> </span><span style="color: #001080">deltaA</span><span style="color: #000000"> + </span><span style="color: #001080">deltaB</span><span style="color: #000000">/</span><span style="color: #098658">2</span><span style="color: #000000"> }</span>
<span style="color: #000000">                        :                   { </span><span style="color: #001080">delta:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000"> }</span>
<span style="color: #000000">                    },</span>
<span style="color: #000000">                ]</span>
<span style="color: #000000">            },</span>
<span style="color: #000000">        ]</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">}</span>
</code></pre>
				<p>We have to be a little creative about the <code>coord</code> field for the midpoint. I&#39;ve used the <code>du</code> graphics helper function (which we <code>require</code>d at the top of the file) to create the <code>y</code> coordinate. This is because all of the values we use must be <code>ScaleBound</code> values. These are simple objects which have both a <code>unit</code> field and a <code>value</code> field. We can construct them in a less verbose way by using <code>du</code>.</p>
				<blockquote>
					<p><em>Note: <code>du</code> stands for Domain Units. There is also the <code>px</code> method which constructs ScaleBound values with the Pixels type unit.</em></p>
				</blockquote>
				<p>We still need to finish filling out our tooltips. Let&#39;s finish them off by adding the top-left and top-right points.</p>
				<pre><code class="language-js">
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Trender</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #008000">//...</span>

<span style="color: #000000">    </span><span style="color: #795E26">tooltips</span><span style="color: #000000">({</span><span style="color: #001080">anchors</span><span style="color: #000000">, </span><span style="color: #001080">props</span><span style="color: #000000">}) {</span>
<span style="color: #000000">        </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">deltaARaw</span><span style="color: #000000"> = </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] ? </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> - </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> : </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">              </span><span style="color: #0070C1">deltaBRaw</span><span style="color: #000000"> = </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">] ? </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> - </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> : </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">              </span><span style="color: #0070C1">deltaA</span><span style="color: #000000">    = </span><span style="color: #267F99">Math</span><span style="color: #000000">.</span><span style="color: #795E26">abs</span><span style="color: #000000">(</span><span style="color: #001080">deltaARaw</span><span style="color: #000000">),</span>
<span style="color: #000000">              </span><span style="color: #0070C1">deltaB</span><span style="color: #000000">    = </span><span style="color: #267F99">Math</span><span style="color: #000000">.</span><span style="color: #795E26">abs</span><span style="color: #000000">(</span><span style="color: #001080">deltaBRaw</span><span style="color: #000000">)</span>

<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [</span>
<span style="color: #000000">            </span><span style="color: #008000">//...</span>
<span style="color: #000000">            </span><span style="color: #008000">//top left</span>
<span style="color: #000000">            {</span>
<span style="color: #000000">                </span><span style="color: #001080">coord:</span><span style="color: #000000"> </span>
<span style="color: #000000">                    </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] </span>
<span style="color: #000000">                    ? {</span>
<span style="color: #000000">                        </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #795E26">du</span><span style="color: #000000">(</span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">),</span>
<span style="color: #000000">                        </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #795E26">du</span><span style="color: #000000">(</span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> + </span><span style="color: #001080">deltaB</span><span style="color: #000000">)</span>
<span style="color: #000000">                    }</span>
<span style="color: #000000">                    : </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">],</span>
<span style="color: #000000">                </span><span style="color: #001080">alignment:</span><span style="color: #000000"> {</span>
<span style="color: #000000">                    </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;predef&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;right&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;above&#039;</span>
<span style="color: #000000">                },</span>
<span style="color: #000000">                </span><span style="color: #001080">items:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                    </span><span style="color: #008000">//price</span>
<span style="color: #000000">                    {</span>
<span style="color: #000000">                        </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;a1.5&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">content:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] ? </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> + </span><span style="color: #001080">deltaB</span><span style="color: #000000"> : </span><span style="color: #098658">0</span>
<span style="color: #000000">                    },</span>
<span style="color: #000000">                    </span><span style="color: #008000">//delta</span>
<span style="color: #000000">                    {</span>
<span style="color: #000000">                        </span><span style="color: #001080">title:</span><span style="color: #000000"> </span>
<span style="color: #000000">                            </span><span style="color: #001080">deltaARaw</span><span style="color: #000000"> &lt; </span><span style="color: #098658">0</span><span style="color: #000000"> ? </span><span style="color: #A31515">&#039;max. A to B Long: &#039;</span>
<span style="color: #000000">                        :   </span><span style="color: #001080">deltaARaw</span><span style="color: #000000"> &gt; </span><span style="color: #098658">0</span><span style="color: #000000"> ? </span><span style="color: #A31515">&#039;min. A to B Short: &#039;</span>
<span style="color: #000000">                        :                   </span><span style="color: #A31515">&#039; - &#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;lowerMax&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">content:</span><span style="color: #000000"> </span>
<span style="color: #000000">                            </span><span style="color: #001080">deltaARaw</span><span style="color: #000000"> &gt; </span><span style="color: #098658">0</span><span style="color: #000000"> ? { </span><span style="color: #001080">delta:</span><span style="color: #000000"> </span><span style="color: #001080">deltaA</span><span style="color: #000000"> - </span><span style="color: #001080">deltaB</span><span style="color: #000000"> }</span>
<span style="color: #000000">                        :   </span><span style="color: #001080">deltaARaw</span><span style="color: #000000"> &lt; </span><span style="color: #098658">0</span><span style="color: #000000"> ? { </span><span style="color: #001080">delta:</span><span style="color: #000000"> </span><span style="color: #001080">deltaA</span><span style="color: #000000"> + </span><span style="color: #001080">deltaB</span><span style="color: #000000"> }</span>
<span style="color: #000000">                        :                   { </span><span style="color: #001080">delta:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000"> }</span>
<span style="color: #000000">                    },</span>
<span style="color: #000000">                ]</span>
<span style="color: #000000">            },</span>
<span style="color: #000000">            </span><span style="color: #008000">//top right</span>
<span style="color: #000000">            {</span>
<span style="color: #000000">                </span><span style="color: #001080">coord:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">] ? { </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000"> } : </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">],</span>
<span style="color: #000000">                </span><span style="color: #001080">alignment:</span><span style="color: #000000"> {</span>
<span style="color: #000000">                    </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;predef&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;center&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;above&#039;</span>
<span style="color: #000000">                },</span>
<span style="color: #000000">                </span><span style="color: #001080">items:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                    {</span>
<span style="color: #000000">                        </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;a2&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                        </span><span style="color: #001080">content:</span><span style="color: #000000"> </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">] ? </span><span style="color: #001080">anchors</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">].</span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> : </span><span style="color: #098658">0</span>
<span style="color: #000000">                    }</span>
<span style="color: #000000">                ]</span>
<span style="color: #000000">            }</span>
<span style="color: #000000">        ]</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">}</span>
</code></pre>
				<p>Now when we hold <code>SHIFT</code> over our drawing, we should see some actually useful information. Try it:</p>
				<p><img src="../../media/AdvancedDrawings2.png" alt="Hold SHIFT to see our tooltips."></p>
			</div>
			<!--{&quot;options&quot;:&quot;c:\\work\\custom-indicators&quot;,&quot;tsconfig&quot;:&quot;c:\\work\\custom-indicators&quot;,&quot;entryPoints&quot;:[&quot;./typescript/indicator.d.ts&quot;,&quot;./typescript/drawing-tool.d.ts&quot;,&quot;./typescript/calculator.d.ts&quot;,&quot;./typescript/params.d.ts&quot;,&quot;./typescript/dlls.d.ts&quot;,&quot;./typescript/plots.d.ts&quot;,&quot;./typescript/plotter.d.ts&quot;,&quot;./typescript/canvas.d.ts&quot;,&quot;./typescript/scaler.d.ts&quot;,&quot;./typescript/scheme-styles.d.ts&quot;,&quot;./typescript/TimeSeries.d.ts&quot;,&quot;./typescript/graphics/GraphicsResponse.d.ts&quot;,&quot;./typescript/graphics/DisplayObject.d.ts&quot;,&quot;./typescript/graphics/Scale.d.ts&quot;,&quot;./typescript/graphics/Style.d.ts&quot;,&quot;./typescript/Shifts.d.ts&quot;],&quot;exclude&quot;:[],&quot;externalPattern&quot;:[&quot;**/node_modules/**&quot;],&quot;excludeExternals&quot;:true,&quot;excludeNotDocumented&quot;:false,&quot;excludePrivate&quot;:true,&quot;excludeProtected&quot;:false,&quot;disableSources&quot;:false,&quot;includes&quot;:&quot;&quot;,&quot;media&quot;:&quot;tutorial/media&quot;,&quot;out&quot;:&quot;docs&quot;,&quot;json&quot;:&quot;&quot;,&quot;theme&quot;:&quot;./node_modules/typedoc-loopingz-theme/bin/default&quot;,&quot;name&quot;:&quot;Tradovate Custom Indicators&quot;,&quot;includeVersion&quot;:false,&quot;excludeTags&quot;:[],&quot;readme&quot;:&quot;./tutorial/index.md&quot;,&quot;defaultCategory&quot;:&quot;Other&quot;,&quot;categoryOrder&quot;:[],&quot;categorizeByGroup&quot;:true,&quot;gitRevision&quot;:&quot;&quot;,&quot;gitRemote&quot;:&quot;origin&quot;,&quot;gaID&quot;:&quot;&quot;,&quot;gaSite&quot;:&quot;auto&quot;,&quot;hideGenerator&quot;:false,&quot;toc&quot;:[],&quot;disableOutputCheck&quot;:false,&quot;help&quot;:false,&quot;version&quot;:false,&quot;showConfig&quot;:false,&quot;plugin&quot;:[],&quot;logger&quot;:&quot;console&quot;,&quot;logLevel&quot;:1,&quot;listInvalidSymbolLinks&quot;:false,&quot;outline&quot;:[],&quot;source&quot;:[{&quot;path&quot;:&quot;https://github.com/tradovate/custom-indicators/tree/master/typescript/&quot;,&quot;line&quot;:&quot;L&quot;}],&quot;excludeReferences&quot;:true,&quot;pages&quot;:{&quot;groups&quot;:[{&quot;title&quot;:&quot;Tutorial&quot;,&quot;source&quot;:&quot;./tutorial/&quot;,&quot;pages&quot;:[{&quot;title&quot;:&quot;Introduction&quot;,&quot;source&quot;:&quot;index.md&quot;},{&quot;title&quot;:&quot;Simple Price Offset&quot;,&quot;source&quot;:&quot;SimplePriceOffset.md&quot;},{&quot;title&quot;:&quot;Parameterized Price Offset&quot;,&quot;source&quot;:&quot;ParameterizedPriceOffset.md&quot;},{&quot;title&quot;:&quot;Exponential Moving Average&quot;,&quot;source&quot;:&quot;ExponentialMovingAverage.md&quot;},{&quot;title&quot;:&quot;Human-friendlier EMA&quot;,&quot;source&quot;:&quot;HumanFriendlierEMA.md&quot;},{&quot;title&quot;:&quot;Built-in tools&quot;,&quot;source&quot;:&quot;BuiltinTools.md&quot;},{&quot;title&quot;:&quot;Double EMA&quot;,&quot;source&quot;:&quot;DoubleEMA.md&quot;},{&quot;title&quot;:&quot;Plotters&quot;,&quot;source&quot;:&quot;Plotters.md&quot;},{&quot;title&quot;:&quot;Signaling Average True Range&quot;,&quot;source&quot;:&quot;SignalingATR.md&quot;},{&quot;title&quot;:&quot;Blackbox DLL&quot;,&quot;source&quot;:&quot;BlackboxDLL.md&quot;},{&quot;title&quot;:&quot;Fourier Moving Average&quot;,&quot;source&quot;:&quot;FourierMovingAverage.md&quot;},{&quot;title&quot;:&quot;Spectrogram&quot;,&quot;source&quot;:&quot;Spectrogram.md&quot;},{&quot;title&quot;:&quot;Graphics&quot;,&quot;source&quot;:&quot;Graphics.md&quot;},{&quot;title&quot;:&quot;Alligator&quot;,&quot;source&quot;:&quot;Alligator.md&quot;},{&quot;title&quot;:&quot;Custom Drawing Tools&quot;,&quot;source&quot;:&quot;DrawingTools.md&quot;},{&quot;title&quot;:&quot;ScaleBound Values&quot;,&quot;source&quot;:&quot;ScaleBoundValues.md&quot;},{&quot;title&quot;:&quot;Advanced Drawing Tools&quot;,&quot;source&quot;:&quot;AdvancedDrawing.md&quot;}]}],&quot;reflectionNavigationTitle&quot;:&quot;Modules&quot;,&quot;useMarkdownTitle&quot;:true,&quot;enableSearch&quot;:false,&quot;listInvalidPageLinks&quot;:true}}-->
			<footer class="with-border-bottom">
			</footer>
			<div class="container tsd-generator">
				<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
			</div>
		</div>
	</div>
</div>
</div>
<div class="overlay"></div>
<script src="../../assets/js/main.js"></script>
</body>
</html>